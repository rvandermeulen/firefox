prefs: [dom.storage_access.headers.enabled:true]
[storage-access-headers.tentative.https.sub.window.html]
  expected:
    if not tsan and (os == "android") and debug: [OK, TIMEOUT]
    if tsan: [TIMEOUT, OK]
  [Sec-Fetch-Storage-Access maintains value on same-origin redirect.]
    expected: FAIL

  [Sec-Fetch-Storage-Access is not 'active' after cross-origin same-site redirection.]
    expected:
      if tsan: TIMEOUT
      FAIL

  [Sec-Fetch-Storage-Access loses value on a cross-site redirection.]
    expected:
      if not tsan and (os == "android") and debug and sessionHistoryInParent: [FAIL, TIMEOUT]
      if tsan: [NOTRUN, PASS, TIMEOUT]
      FAIL

  [Sec-Fetch-Storage-Access is `active` after a valid retry with matching explicit allowed-origin.]
    expected:
      if (os == "android") and not sessionHistoryInParent and debug: [PASS, FAIL]
      if (os == "android") and not sessionHistoryInParent and not debug: [PASS, FAIL]
      if (os == "android") and sessionHistoryInParent: [PASS, FAIL]

  [Activate-Storage-Access retry is handled before any redirects are followed.]
    expected:
      if (os == "android") and not sessionHistoryInParent and debug: [PASS, FAIL, TIMEOUT, NOTRUN]
      if (os == "android") and not sessionHistoryInParent and not debug: [PASS, FAIL, TIMEOUT, NOTRUN]
      if (os == "linux") and tsan: [NOTRUN, PASS, TIMEOUT]
      if (os == "android") and sessionHistoryInParent: [PASS, FAIL, TIMEOUT, NOTRUN]

  [Sec-Fetch-Storage-Access is active after retry with wildcard `allowed-origin` value.]
    expected:
      if (os == "android") and not sessionHistoryInParent and debug: [PASS, FAIL]
      if (os == "android") and not sessionHistoryInParent and not debug: [PASS, FAIL]
      if (os == "android") and sessionHistoryInParent: [PASS, FAIL]
